
[백준][G5] 2800 괄호 제거 / (AC)
---
> **문제 설명**
> 

[[문제 링크](https://www.acmicpc.net/problem/2800)]

어떤 수식이 주어졌을 때, 괄호를 제거해서 나올 수 있는 서로 다른 식의 개수를 계산하는 프로그램을 작성하시오.

이 수식은 괄호가 올바르게 쳐져 있다. 예를 들면, 1+2, (3+4), (3+4*(5+6))와 같은 식은 괄호가 서로 쌍이 맞으므로 올바른 식이다.

하지만, 1+(2*3, ((2+3)*4 와 같은 식은 쌍이 맞지 않는 괄호가 있으므로 올바른 식이 아니다.

괄호를 제거할 때는, 항상 쌍이 되는 괄호끼리 제거해야 한다.

<p>예를들어 (2+(2*2)+2)에서 괄호를 제거하면, (2+2*2+2), 2+(2*2)+2, 2+2*2+2를 만들 수 있다. 하지만, (2+2*2)+2와 2+(2*2+2)는 만들 수 없다. 그 이유는 쌍이 되지 않는 괄호를 제거했기 때문이다.
</p>

어떤 식을 여러 쌍의 괄호가 감쌀 수 있다.

---

> **제한사항**
> 

**입력**

첫째 줄에 음이 아닌 정수로 이루어진 수식이 주어진다. 이 수식은 괄호가 올바르게 쳐져있다. 숫자, '+', '*', '-', '/', '(', ')'로만 이루어져 있다. 수식의 길이는 최대 200이고, 괄호 쌍은 적어도 1개, 많아야 10개이다. 

**출력**

올바른 괄호 쌍을 제거해서 나올 수 있는 서로 다른 식을 사전 순으로 출력한다.

---

> **문제 풀이**
> 

모든 경우의 수를 찾아야 하니 브루트포스로 접근.

항상 알맞은 괄호 식만 주어지고, 제거하는 괄호는 항상 쌍이 돼야 하므로 여는 괄호`(` 와 닫는 괄호`)`를 묶어서 지우는 모든 경우를 완전 탐색하면 된다.

괄호마다 그대로 두거나, 제거하거나 이므로 `2^(괄호 개수)`개 만큼의 경우가 있는데, 이를 각 케이스마다 반복자를 비트열로 생각하고 `&`(비트 논리곱)과 `>>`(비트 시프트) 연산을 통해 제거할 괄호를 판별하는 식으로 구현하였다.


---

> **코드**
> 

```python
import sys
import copy

expr = [*sys.stdin.readline().rstrip()]
br_count = expr.count('(')
answer = set()

for comb in range(1, 2 ** br_count):
    stack = []
    temp = copy.deepcopy(expr)
    for i in range(len(temp)):
        if temp[i] == '(':
            if comb & 1:
                stack.append('{')
                temp[i] = ''
            else:
                stack.append('(')
            comb >>= 1
        elif temp[i] == ')':
            if stack[-1] == '{': temp[i] = ''
            stack.pop()
    answer.add(''.join(temp))

print(*sorted(answer), sep='\n')

```

---

> **후기**
> 

DFS로도 풀 수 있겠지만, 조합론을 이용해서 

문제 풀이 시간 : 30분 / 실행시간 : `104ms` / 메모리 : `31588KB` / 코드길이 : `574B`

알고리즘 분류 : 스택, 브루트포스